{"filter":false,"title":"shots.js","tooltip":"/app/assets/javascripts/shots.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":104,"column":3},"action":"insert","lines":["document.addEventListener(\"turbolinks:load\", function() {","","\tvar Shots = {","\t\tpreviewShot() {","\t\t\tif (window.File && window.FileList && window.FileReader) {","","\t\t\t\tfunction handleFileSelect(evt) {","\t\t\t\t\tevt.stopPropagation();","\t\t\t\t\tevt.preventDefault();","","\t\t\t\t\tlet files = evt.target.files || evt.dataTransfer.files; ","\t\t\t\t\t// files is a FileList of File objects. List some properties.","\t\t\t\t\tfor (var i = 0, f; f = files[i]; i++) {","","\t\t\t\t\t\t// Only process image files.","\t\t\t\t\t\tif (!f.type.match('image.*')) {","\t\t\t\t\t\t\tcontinue;","\t\t\t\t\t\t}","\t\t\t\t\t\tconst reader = new FileReader();","","\t\t\t\t\t\t// Closure to capture the file information.","\t\t\t\t\t\treader.onload = (function(theFile) {","\t\t\t\t\t\t\treturn function(e) {","\t\t\t\t\t\t\t\t// Render thumbnail.","\t\t\t\t\t\t\t\tlet span = document.createElement('span');","\t\t\t\t\t\t\t\tspan.innerHTML = ['<img class=\"thumb\" src=\"', e.target.result,","\t\t\t\t\t\t\t\t\t'\" title=\"', escape(theFile.name), '\"/>'","\t\t\t\t\t\t\t\t].join('');","\t\t\t\t\t\t\t\tdocument.getElementById('list').insertBefore(span, null);","\t\t\t\t\t\t\t};","\t\t\t\t\t\t})(f);","","\t\t\t\t\t\t// Read in the image file as a data URL.","\t\t\t\t\t\treader.readAsDataURL(f);","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\tfunction handleDragOver(evt) {","\t\t\t\t\tevt.stopPropagation();","\t\t\t\t\tevt.preventDefault();","\t\t\t\t\tevt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.","\t\t\t\t}","","\t\t\t\t// Setup the dnd listeners.","\t\t\t\t// https://stackoverflow.com/questions/47515232/how-to-set-file-input-value-when-dropping-file-on-page","\t\t\t\tconst dropZone = document.getElementById('drop_zone');","\t\t\t\tconst target = document.documentElement;","\t\t\t\tconst fileInput = document.getElementById('shot_user_shot');","\t\t\t\tconst previewImage = document.getElementById('previewImage');","\t\t\t\tconst newShotForm = document.getElementById('new_shot');","","","\t\t\t\tif (dropZone) {","\t\t\t\t\tdropZone.addEventListener('dragover', handleDragOver, false);","\t\t\t\t\tdropZone.addEventListener('drop', handleFileSelect, false);","","\t\t\t\t\t// Drop zone classes itself","\t\t\t\t\tdropZone.addEventListener('dragover', (e) => {","\t\t\t\t\t\tdropZone.classList.add('fire');","\t\t\t\t\t}, false);","","\t\t\t\t\tdropZone.addEventListener('dragleave', (e) => {","\t\t\t\t\t\tdropZone.classList.remove('fire');","\t\t\t\t\t}, false);","","\t\t\t\t\tdropZone.addEventListener('drop', (e) => {","\t\t\t\t\t\te.preventDefault();","\t\t\t\t\t\tdropZone.classList.remove('fire');","\t\t\t\t\t\tfileInput.files = e.dataTransfer.files;","\t\t\t\t\t\t// if on shot/id/edit hide preview image on drop","\t\t\t\t\t\tif (previewImage) {","\t\t\t\t\t\t\tpreviewImage.style.display = 'none';","\t\t\t\t\t\t}","\t\t\t\t\t\t// If on shots/new hide dropzone on drop","\t\t\t\t\t\tif(newShotForm) {","\t\t\t\t\t\t\tdropZone.style.display = 'none';","\t\t\t\t\t\t}","\t\t\t\t\t}, false);","","\t\t\t\t\t// Body specific ","\t\t\t\t\ttarget.addEventListener('dragover', (e) => {","\t\t\t\t\t\te.preventDefault();","\t\t\t\t\t\tdropZone.classList.add('dragging');","\t\t\t\t\t}, false);","","\t\t\t\t\t// removes dragging class to body WHEN NOT dragging","\t\t\t\t\ttarget.addEventListener('dragleave', (e) => {","\t\t\t\t\t\tdropZone.classList.remove('dragging');","\t\t\t\t\t\tdropZone.classList.remove('fire');","\t\t\t\t\t}, false);","\t\t\t\t}","\t\t\t}","\t\t},","\t\tshotHover() {","\t\t\t$('.shot').hover(function() {","\t\t\t\t$(this).children('.shot-data').toggleClass('visible');","\t\t\t});","\t\t}","","\t};","\tShots.previewShot();","\tShots.shotHover();","","","});"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":104,"column":3},"end":{"row":104,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1582179608604,"hash":"a75be1531da74f028f73c9879e8c275505bdf53a"}