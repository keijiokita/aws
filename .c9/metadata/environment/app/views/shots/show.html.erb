{"changed":true,"filter":false,"title":"show.html.erb","tooltip":"/app/views/shots/show.html.erb","value":"<div class=\"section\">\n\t<div class=\"container\">\n\t\t<h1 class=\"title is-3\"><%= @shot.title %></h1>\n\t\t<div class=\"columns\">\n\t\t\t<div class=\"column is-8\">\n\t\t\t\t<span class=\"by has-text-grey-light\">by</span>\n\t\t\t\t<div class=\"user-thumb\">\n\t\t\t\t\t     <p class=\"image is-48x48 user-thumb\">\n        <% if @shot.user.avatar.blank? %>\n        <%= image_tag 'no_avatar.png' %>\n        <% else %>\n       <%= image_tag @shot.user.avatar.to_s %>\n       <% end %>\n      </p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"user-name has-text-weight-bold\"><%= @shot.user.name %></div>\n\t\t\t\t<div class=\"shot-time\"><span class=\"has-text-grey-light\">posted</span><span class=\"has-text-weight-semibold\">\n\t\t\t\t</span></div>\n\t\t\t</div>\t\n\t\t</div>\n\n\t\t<div class=\"columns\">\n\t\t\t<div class=\"column is-8\">\n\t\t\t\t<div class=\"shot-container\">\n\t\t\t\t\t<div class=\"shot-full\">\n\t\t\t\t\t\t <%= image_tag @shot.user_shot_url unless @shot.user_shot.blank? %>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<% if user_signed_in? && (current_user.id == @shot.user_id) %>\t\t\n\t\t\t\t\t\t<div class=\"buttons has-addons\">\n\t\t\t\t\t\t\t<%= link_to 'Edit', edit_shot_path(@shot), class: \"button\" %>\n\t\t\t\t\t\t\t<%= link_to 'Delete', shot_path, class: \"button\", method: :delete, data: { confirm: 'Are you sure you want to delete this shot?'} %>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<% end %>\n\n\t\t\t\t\t<div class=\"content\">\n\t\t\t\t\t\t<%= @shot.description %>\n\t\t\t\t\t</div>\n\n\t\t\t<div class=\"shot-full\">\n<div id='map'></div>\n<%= @shot.address %>\n<%= @shot.latitude %>\n<%= @shot.longitude %>\n\n</div>\n\n\n\n\t\t\t\t\t<section class=\"comments\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<h2 class=\"subtitle is-5\"><%= pluralize(@shot.comments.count, 'Comment') %></h2>\n\t\t\t\t\t\t\t<%= render @shot.comments %>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<% if user_signed_in? %>\n\t\t\t\t\t\t\t<div class=\"comment-form\">\n\t\t\t\t\t\t\t\t<h3 class=\"subtitle is-3\">Leave a response</h3>\n\t\t\t\t\t\t\t\t<%= render 'comments/form' %>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<% else %>\n\t\t\t\t\t\t\t<div class=\"content\"><%= link_to 'Sign in', new_user_session_path %> to leave a response.</div>\n\t\t\t\t\t\t<% end %>\n\t\t\t\t\t</section>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"column is-3 is-offset-1\">\n\t\t\t\t<div class=\"nav panel show-shot-analytics\">\n\t\t\t\t\t<div class=\"panel-block views data\">\n\t\t\t\t\t\t<span class=\"icon\"><i class=\"fa fa-eye has-text-primary\"></i></span>\n\t\t\t\t\t\t<%= pluralize(@shot.impressionist_count, 'View') %>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"panel-block comments data\">\n\t\t\t\t\t\t<span class=\"icon\"><i class=\"fa fa-comment has-text-link\"></i></span>\n\t\t\t\t\t\t<%= pluralize(@shot.comments.count, 'Comment') %>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"panel-block likes data\">\n\t\t\t\t\t\t<% if user_signed_in? %>\n              <% if current_user.liked? @shot %>\n                <%= link_to unlike_shot_path(@shot), method: :put, class: \"unlike_shot\" do %>\n                  <span class=\"icon\"><i class=\"fas fa-gem has-text-danger\"></i></span>\n                  <span class=\"vote_count\"><%= pluralize(@shot.get_likes.size, 'Like') %></span>\n                <% end %>\n              <% else %>\n                <%= link_to like_shot_path(@shot), method: :put, class: \"like_shot\" do %>\n                  <span class=\"icon\"><i class=\"fas fa-gem has-text-danger\"></i></span>\n                  <span class=\"vote_count\"><%= pluralize(@shot.get_likes.size, 'Like') %></span>\n                <% end %>\n              <% end %>\n            <% else %>\n                <%= link_to like_shot_path(@shot), method: :put, class: \"like_shot\" do %>\n                  <span class=\"icon\"><i class=\"fas fa-gem has-text-danger\"></i></span>\n                  <span class=\"vote_count\"><%= pluralize(@shot.get_likes.size, 'Like') %></span>\n                <% end %>\n            <% end %>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<script type=\"text/javascript\">\n  function initMap() {\n\n    var test = {lat: <%= @shot.latitude %>, lng: <%= @shot.longitude %>};\n    var map = new google.maps.Map(document.getElementById('map'), {\n      zoom: 5,\n      center: test\n    });\n    var transitLayer = new google.maps.TransitLayer();\n    transitLayer.setMap(map);\n\n    var contentString = '住所：<%= @shot.address %>';\n    var infowindow = new google.maps.InfoWindow({\n      content: contentString\n    });\n\n    var marker = new google.maps.Marker({\n      position:test,\n      map: map,\n      title: contentString\n    });\n\n    marker.addListener('click', function() {\n      infowindow.open(map, marker);\n    });\n  }\n</script>\n<script src=\"https://maps.googleapis.com/maps/api/js?key=<%= ENV[\"MAPS_API\"] %>&callback=initMap&language=en\" async defer></script>\n\n","undoManager":{"mark":7,"position":7,"stack":[[{"start":{"row":129,"column":57},"end":{"row":129,"column":95},"action":"remove","lines":["AIzaSyAd6VENRw-lVuallB-_deAYJSw9ChjrKo"],"id":2}],[{"start":{"row":129,"column":57},"end":{"row":129,"column":58},"action":"remove","lines":["4"],"id":3}],[{"start":{"row":129,"column":57},"end":{"row":129,"column":86},"action":"insert","lines":["<%= ENV[\"TWITTER_API_KEY\"] %>"],"id":4}],[{"start":{"row":129,"column":80},"end":{"row":129,"column":81},"action":"remove","lines":["Y"],"id":5},{"start":{"row":129,"column":79},"end":{"row":129,"column":80},"action":"remove","lines":["E"]},{"start":{"row":129,"column":78},"end":{"row":129,"column":79},"action":"remove","lines":["K"]},{"start":{"row":129,"column":77},"end":{"row":129,"column":78},"action":"remove","lines":["_"]},{"start":{"row":129,"column":76},"end":{"row":129,"column":77},"action":"remove","lines":["I"]},{"start":{"row":129,"column":75},"end":{"row":129,"column":76},"action":"remove","lines":["P"]},{"start":{"row":129,"column":74},"end":{"row":129,"column":75},"action":"remove","lines":["A"]},{"start":{"row":129,"column":73},"end":{"row":129,"column":74},"action":"remove","lines":["_"]},{"start":{"row":129,"column":72},"end":{"row":129,"column":73},"action":"remove","lines":["R"]},{"start":{"row":129,"column":71},"end":{"row":129,"column":72},"action":"remove","lines":["E"]},{"start":{"row":129,"column":70},"end":{"row":129,"column":71},"action":"remove","lines":["T"]},{"start":{"row":129,"column":69},"end":{"row":129,"column":70},"action":"remove","lines":["T"]},{"start":{"row":129,"column":68},"end":{"row":129,"column":69},"action":"remove","lines":["I"]},{"start":{"row":129,"column":67},"end":{"row":129,"column":68},"action":"remove","lines":["W"]},{"start":{"row":129,"column":66},"end":{"row":129,"column":67},"action":"remove","lines":["T"]}],[{"start":{"row":129,"column":66},"end":{"row":129,"column":67},"action":"insert","lines":["M"],"id":6},{"start":{"row":129,"column":67},"end":{"row":129,"column":68},"action":"insert","lines":["A"]},{"start":{"row":129,"column":68},"end":{"row":129,"column":69},"action":"insert","lines":["P"]},{"start":{"row":129,"column":69},"end":{"row":129,"column":70},"action":"insert","lines":["S"]},{"start":{"row":129,"column":70},"end":{"row":129,"column":71},"action":"insert","lines":["_"]}],[{"start":{"row":129,"column":71},"end":{"row":129,"column":72},"action":"insert","lines":["A"],"id":7},{"start":{"row":129,"column":72},"end":{"row":129,"column":73},"action":"insert","lines":["P"]},{"start":{"row":129,"column":73},"end":{"row":129,"column":74},"action":"insert","lines":["I"]}],[{"start":{"row":129,"column":73},"end":{"row":129,"column":74},"action":"remove","lines":["I"],"id":8}],[{"start":{"row":129,"column":73},"end":{"row":129,"column":74},"action":"insert","lines":["I"],"id":9}],[{"start":{"row":113,"column":25},"end":{"row":113,"column":26},"action":"insert","lines":["a"],"id":11},{"start":{"row":113,"column":26},"end":{"row":113,"column":27},"action":"insert","lines":["d"]},{"start":{"row":113,"column":27},"end":{"row":113,"column":28},"action":"insert","lines":["d"]},{"start":{"row":113,"column":28},"end":{"row":113,"column":29},"action":"insert","lines":["r"]},{"start":{"row":113,"column":29},"end":{"row":113,"column":30},"action":"insert","lines":["e"]},{"start":{"row":113,"column":30},"end":{"row":113,"column":31},"action":"insert","lines":["s"]},{"start":{"row":113,"column":31},"end":{"row":113,"column":32},"action":"insert","lines":["s"]}],[{"start":{"row":113,"column":26},"end":{"row":113,"column":27},"action":"remove","lines":["所"],"id":11},{"start":{"row":113,"column":25},"end":{"row":113,"column":26},"action":"remove","lines":["住"]}]]},"ace":{"folds":[],"scrolltop":1500,"scrollleft":0,"selection":{"start":{"row":129,"column":53},"end":{"row":129,"column":79},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1593215737117}